{"version":3,"file":"login.js","sources":["pages/auth/login/login.vue","../../../../../HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvYXV0aC9sb2dpbi9sb2dpbi52dWU"],"sourcesContent":["<template>\n\t<view class=\"login-container\">\n\t\t<view class=\"logo-container\">\n\t\t\t<image class=\"logo\" src=\"/static/logo.png\" mode=\"aspectFit\"></image>\n\t\t</view>\n\n\t\t<view class=\"title\">欢迎登录</view>\n\n\t\t<view class=\"button-container\">\n\t\t\t<button class=\"login-button\" @tap=\"handleLogin\">微信一键登录</button>\n\t\t</view>\n\t\t<view class=\"tip-text\">登录后即可使用完整功能</view>\n\t</view>\n</template>\n\n<script setup>\nimport { ref } from 'vue';\n\nconst loading = ref(false);\n\nconst handleLogin = () => {\n\tloading.value = true;\n\t// 调用微信登录接口\n\twx.login({\n\t\tsuccess: (res) => {\n\t\t\tif (res.code) {\n\t\t\t\t// 发送 res.code 到后台换取 openid、session_key 等信息\n\t\t\t\twx.request({\n\t\t\t\t\turl: 'https://your-server.com/api/login',\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tcode: res.code,\n\t\t\t\t\t},\n\t\t\t\t\tsuccess: (response) => {\n\t\t\t\t\t\tloading.value = false;\n\t\t\t\t\t\t// 获取到用户的 openid 和 session_key 后处理\n\t\t\t\t\t\tconst { openid, session_key } = response.data;\n\t\t\t\t\t\tconsole.log('用户 openid:', openid);\n\n\t\t\t\t\t\t// 保存用户登录状态\n\t\t\t\t\t\tuni.setStorageSync('userInfo', response.data);\n\n\t\t\t\t\t\t// 登录成功后跳转到任务列表页面\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: '登录成功',\n\t\t\t\t\t\t\ticon: 'success',\n\t\t\t\t\t\t\tduration: 2000,\n\t\t\t\t\t\t\tsuccess: () => {\n\t\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\t\tuni.switchTab({\n\t\t\t\t\t\t\t\t\t\turl: '/pages/tasks/list/list'\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}, 2000);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tfail: (error) => {\n\t\t\t\t\t\tloading.value = false;\n\t\t\t\t\t\tconsole.error('请求失败', error);\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: '登录失败，请重试',\n\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tloading.value = false;\n\t\t\t\tconsole.log('登录失败！' + res.errMsg);\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '登录失败，请重试',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tfail: () => {\n\t\t\tloading.value = false;\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '登录失败，请重试',\n\t\t\t\ticon: 'none'\n\t\t\t});\n\t\t}\n\t});\n};\n</script>\n\n<style>\n.login-container {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    padding: 60rpx;\n    height: 100vh;\n    background-color: #f9fafb;\n}\n\n.logo-container {\n    margin-top: 100rpx;\n    margin-bottom: 60rpx;\n}\n\n.logo {\n    width: 200rpx;\n    height: 200rpx;\n}\n\n.title {\n    font-size: 48rpx;\n    font-weight: bold;\n    margin-bottom: 80rpx;\n    color: #1f2937;\n    text-align: center;\n}\n\n.button-container {\n    width: 100%;\n    margin-bottom: 40rpx;\n}\n\n.login-button {\n    width: 100%;\n    height: 90rpx;\n    line-height: 90rpx;\n    background-color: #10b981;\n    border-radius: 45rpx;\n    font-size: 32rpx;\n    color: white;\n}\n\n.tip-text {\n    font-size: 28rpx;\n    color: #6b7280;\n    margin-top: 30rpx;\n}\n</style>\n","import MiniProgramPage from 'C:/Users/24203/Desktop/workspace/daily-task-frontend/pages/auth/login/login.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","wx","uni","MiniProgramPage"],"mappings":";;;;;;AAkBA,UAAM,UAAUA,cAAAA,IAAI,KAAK;AAEzB,UAAM,cAAc,MAAM;AACzB,cAAQ,QAAQ;AAEhBC,oBAAAA,KAAG,MAAM;AAAA,QACR,SAAS,CAAC,QAAQ;AACjB,cAAI,IAAI,MAAM;AAEbA,0BAAAA,KAAG,QAAQ;AAAA,cACV,KAAK;AAAA,cACL,QAAQ;AAAA,cACR,MAAM;AAAA,gBACL,MAAM,IAAI;AAAA,cACV;AAAA,cACD,SAAS,CAAC,aAAa;AACtB,wBAAQ,QAAQ;AAEhB,sBAAM,EAAE,QAAQ,gBAAgB,SAAS;AACzCC,8BAAY,MAAA,MAAA,OAAA,oCAAA,cAAc,MAAM;AAGhCA,8BAAAA,MAAI,eAAe,YAAY,SAAS,IAAI;AAG5CA,8BAAAA,MAAI,UAAU;AAAA,kBACb,OAAO;AAAA,kBACP,MAAM;AAAA,kBACN,UAAU;AAAA,kBACV,SAAS,MAAM;AACd,+BAAW,MAAM;AAChBA,oCAAAA,MAAI,UAAU;AAAA,wBACb,KAAK;AAAA,sBACf,CAAU;AAAA,oBACD,GAAE,GAAI;AAAA,kBACP;AAAA,gBACR,CAAO;AAAA,cACD;AAAA,cACD,MAAM,CAAC,UAAU;AAChB,wBAAQ,QAAQ;AAChBA,8BAAc,MAAA,MAAA,SAAA,oCAAA,QAAQ,KAAK;AAC3BA,8BAAAA,MAAI,UAAU;AAAA,kBACb,OAAO;AAAA,kBACP,MAAM;AAAA,gBACb,CAAO;AAAA,cACD;AAAA,YACN,CAAK;AAAA,UACL,OAAU;AACN,oBAAQ,QAAQ;AAChBA,0BAAY,MAAA,MAAA,OAAA,oCAAA,UAAU,IAAI,MAAM;AAChCA,0BAAAA,MAAI,UAAU;AAAA,cACb,OAAO;AAAA,cACP,MAAM;AAAA,YACX,CAAK;AAAA,UACD;AAAA,QACD;AAAA,QACD,MAAM,MAAM;AACX,kBAAQ,QAAQ;AAChBA,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO;AAAA,YACP,MAAM;AAAA,UACV,CAAI;AAAA,QACD;AAAA,MACH,CAAE;AAAA,IACF;;;;;;;;;ACjFA,GAAG,WAAWC,SAAe;"}