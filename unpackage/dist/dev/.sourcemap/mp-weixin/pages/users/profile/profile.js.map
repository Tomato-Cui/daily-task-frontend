{"version":3,"file":"profile.js","sources":["pages/users/profile/profile.vue","../../../../../HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvdXNlcnMvcHJvZmlsZS9wcm9maWxlLnZ1ZQ"],"sourcesContent":["<template>\n\t<view class=\"profile-container\">\n\t\t<!-- 用户资料卡片 -->\n\t\t<view class=\"user-card\">\n\t\t\t<view class=\"user-info\">\n\t\t\t\t<image :src=\"userInfo.avatar || '/static/default-avatar.png'\" class=\"avatar\"></image>\n\t\t\t\t<view class=\"user-details\">\n\t\t\t\t\t<view class=\"user-name\">{{ userInfo.nickname || '未登录' }}</view>\n\t\t\t\t\t<view class=\"user-phone\">{{ userInfo.phone || '未绑定手机号' }}</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t\n\t\t\t<!-- 角色切换 -->\n\t\t\t<view class=\"role-switch\">\n\t\t\t\t<view class=\"role-label\">当前身份</view>\n\t\t\t\t<view class=\"role-buttons\">\n\t\t\t\t\t<view \n\t\t\t\t\t\tclass=\"role-button\" \n\t\t\t\t\t\t:class=\"userRole === 'employer' ? 'role-active' : 'role-inactive'\"\n\t\t\t\t\t\t@tap=\"switchRole('employer')\"\n\t\t\t\t\t>雇佣者</view>\n\t\t\t\t\t<view class=\"role-spacer\"></view>\n\t\t\t\t\t<view \n\t\t\t\t\t\tclass=\"role-button\"\n\t\t\t\t\t\t:class=\"userRole === 'worker' ? 'role-active' : 'role-inactive'\"\n\t\t\t\t\t\t@tap=\"switchRole('worker')\"\n\t\t\t\t\t>求职者</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t\t\n\t\t<!-- 功能菜单 -->\n\t\t<view class=\"feature-menu\">\n\t\t\t<view class=\"feature-grid\">\n\t\t\t\t<view class=\"feature-item\" @tap=\"navigateTo('/pages/users/editProfile/editProfile')\">\n\t\t\t\t\t<view class=\"feature-icon feature-edit\">\n\t\t\t\t\t\t<text class=\"feature-icon-text edit-icon\">编</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<text class=\"feature-text\">编辑资料</text>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<view class=\"feature-item\" @tap=\"navigateTo('/pages/tasks/list/list')\">\n\t\t\t\t\t<view class=\"feature-icon feature-task\">\n\t\t\t\t\t\t<text class=\"feature-icon-text task-icon\">任</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<text class=\"feature-text\">任务列表</text>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<view class=\"feature-item\" v-if=\"userRole === 'employer'\" @tap=\"navigateTo('/pages/tasks/create/create')\">\n\t\t\t\t\t<view class=\"feature-icon feature-publish\">\n\t\t\t\t\t\t<text class=\"feature-icon-text publish-icon\">发</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<text class=\"feature-text\">发布任务</text>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<view class=\"feature-item\" v-if=\"userRole === 'worker'\" @tap=\"navigateTo('/pages/applications/status/status')\">\n\t\t\t\t\t<view class=\"feature-icon feature-apply\">\n\t\t\t\t\t\t<text class=\"feature-icon-text apply-icon\">申</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<text class=\"feature-text\">我的申请</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t\t\n\t\t<!-- 列表菜单 -->\n\t\t<view class=\"list-menu\">\n\t\t\t<view class=\"menu-item\" @tap=\"navigateTo('/pages/payments/history/history')\">\n\t\t\t\t<text class=\"menu-text\">支付记录</text>\n\t\t\t\t<text class=\"menu-arrow\">></text>\n\t\t\t</view>\n\t\t\t<view class=\"menu-item\">\n\t\t\t\t<text class=\"menu-text\">意见反馈</text>\n\t\t\t\t<text class=\"menu-arrow\">></text>\n\t\t\t</view>\n\t\t\t<view class=\"menu-item\">\n\t\t\t\t<text class=\"menu-text\">关于我们</text>\n\t\t\t\t<text class=\"menu-arrow\">></text>\n\t\t\t</view>\n\t\t\t<view class=\"menu-item logout-item\" @tap=\"logout\">\n\t\t\t\t<text class=\"logout-text\">退出登录</text>\n\t\t\t\t<text class=\"menu-arrow\">></text>\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script setup>\nimport { ref, onMounted } from 'vue';\n\n// 用户信息\nconst userInfo = ref({\n\tavatar: '',\n\tnickname: '张三',\n\tphone: '138****1234'\n});\n\n// 用户角色：employer(雇佣者) 或 worker(求职者)\nconst userRole = ref('worker');\n\n// 初始化\nonMounted(() => {\n\t// 从缓存获取用户信息\n\tconst cachedUserInfo = uni.getStorageSync('userInfo');\n\tif (cachedUserInfo) {\n\t\tuserInfo.value = cachedUserInfo;\n\t}\n\t\n\t// 从缓存获取用户角色\n\tconst cachedUserRole = uni.getStorageSync('userRole');\n\tif (cachedUserRole) {\n\t\tuserRole.value = cachedUserRole;\n\t}\n});\n\n// 切换角色\nconst switchRole = (role) => {\n\tif (userRole.value === role) return;\n\t\n\tuserRole.value = role;\n\t// 保存角色到缓存\n\tuni.setStorageSync('userRole', role);\n\t\n\t// 显示提示\n\tuni.showToast({\n\t\ttitle: role === 'employer' ? '已切换为雇佣者' : '已切换为求职者',\n\t\ticon: 'none'\n\t});\n\t\n\t// 如果在tabBar页面，刷新当前页面以反映角色变化\n\tconst currentPages = getCurrentPages();\n\tconst currentPage = currentPages[currentPages.length - 1];\n\tif (currentPage && currentPage.route && ['pages/tasks/list/list', 'pages/applications/status/status', 'pages/users/profile/profile'].includes(currentPage.route)) {\n\t\tsetTimeout(() => {\n\t\t\tuni.reLaunch({\n\t\t\t\turl: '/' + currentPage.route\n\t\t\t});\n\t\t}, 500);\n\t}\n};\n\n// 页面导航\nconst navigateTo = (url) => {\n\t// 对于tabBar页面使用switchTab，其他页面使用navigateTo\n\tif (url.includes('/pages/applications/status/status') || \n\t    url.includes('/pages/tasks/list/list')) {\n\t\tuni.switchTab({\n\t\t\turl\n\t\t});\n\t} else {\n\t\tuni.navigateTo({\n\t\t\turl\n\t\t});\n\t}\n};\n\n// 退出登录\nconst logout = () => {\n\tuni.showModal({\n\t\ttitle: '提示',\n\t\tcontent: '确定要退出登录吗？',\n\t\tsuccess: (res) => {\n\t\t\tif (res.confirm) {\n\t\t\t\t// 清除用户信息和登录状态\n\t\t\t\tuni.removeStorageSync('userInfo');\n\t\t\t\tuni.removeStorageSync('userRole');\n\t\t\t\t\n\t\t\t\t// 返回登录页\n\t\t\t\tuni.reLaunch({\n\t\t\t\t\turl: '/pages/auth/login/login'\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n};\n</script>\n\n<style>\n.profile-container {\n\tdisplay: flex;\n\tflex-direction: column;\n\tmin-height: 100vh;\n\tbackground-color: #f9fafb;\n}\n\n/* 用户资料卡片样式 */\n.user-card {\n\tbackground-color: #ffffff;\n\tpadding: 30rpx;\n\tbox-shadow: 0 1rpx 2rpx rgba(0, 0, 0, 0.05);\n\tmargin-bottom: 20rpx;\n}\n\n.user-info {\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.avatar {\n\twidth: 120rpx;\n\theight: 120rpx;\n\tborder-radius: 50%;\n}\n\n.user-details {\n\tmargin-left: 30rpx;\n}\n\n.user-name {\n\tfont-size: 36rpx;\n\tfont-weight: bold;\n}\n\n.user-phone {\n\tfont-size: 28rpx;\n\tcolor: #6b7280;\n\tmargin-top: 10rpx;\n}\n\n/* 角色切换样式 */\n.role-switch {\n\tmargin-top: 30rpx;\n\tbackground-color: #f3f4f6;\n\tpadding: 20rpx;\n\tborder-radius: 8rpx;\n}\n\n.role-label {\n\tfont-size: 28rpx;\n\tmargin-bottom: 20rpx;\n\tcolor: #4b5563;\n}\n\n.role-buttons {\n\tdisplay: flex;\n}\n\n.role-button {\n\tflex: 1;\n\tpadding: 15rpx 0;\n\ttext-align: center;\n\tborder-radius: 8rpx;\n\tfont-size: 28rpx;\n}\n\n.role-spacer {\n\twidth: 20rpx;\n}\n\n.role-active {\n\tbackground-color: #3b82f6;\n\tcolor: #ffffff;\n}\n\n.role-inactive {\n\tbackground-color: #e5e7eb;\n\tcolor: #4b5563;\n}\n\n/* 功能菜单样式 */\n.feature-menu {\n\tbackground-color: #ffffff;\n\tbox-shadow: 0 1rpx 2rpx rgba(0, 0, 0, 0.05);\n}\n\n.feature-grid {\n\tdisplay: grid;\n\tgrid-template-columns: repeat(3, 1fr);\n\tgap: 1rem;\n\tpadding: 30rpx;\n}\n\n.feature-item {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n}\n\n.feature-icon {\n\twidth: 80rpx;\n\theight: 80rpx;\n\tborder-radius: 50%;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tmargin-bottom: 10rpx;\n}\n\n.feature-edit {\n\tbackground-color: #dbeafe;\n}\n\n.feature-task {\n\tbackground-color: #d1fae5;\n}\n\n.feature-publish {\n\tbackground-color: #ffedd5;\n}\n\n.feature-apply {\n\tbackground-color: #f3e8ff;\n}\n\n.feature-icon-text {\n\tfont-size: 40rpx;\n}\n\n.edit-icon {\n\tcolor: #3b82f6;\n}\n\n.task-icon {\n\tcolor: #10b981;\n}\n\n.publish-icon {\n\tcolor: #f97316;\n}\n\n.apply-icon {\n\tcolor: #8b5cf6;\n}\n\n.feature-text {\n\tfont-size: 24rpx;\n}\n\n/* 列表菜单样式 */\n.list-menu {\n\tbackground-color: #ffffff;\n\tmargin-top: 20rpx;\n\tbox-shadow: 0 1rpx 2rpx rgba(0, 0, 0, 0.05);\n}\n\n.menu-item {\n\tpadding: 30rpx;\n\tborder-bottom: 1rpx solid #f3f4f6;\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n}\n\n.menu-text {\n\tfont-size: 30rpx;\n}\n\n.menu-arrow {\n\tcolor: #9ca3af;\n}\n\n.logout-item {\n\tborder-bottom: none;\n}\n\n.logout-text {\n\tfont-size: 30rpx;\n\tcolor: #ef4444;\n}\n</style>\n","import MiniProgramPage from 'C:/Users/24203/Desktop/workspace/daily-task-frontend/pages/users/profile/profile.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","onMounted","uni","MiniProgramPage"],"mappings":";;;;;AA0FA,UAAM,WAAWA,cAAAA,IAAI;AAAA,MACpB,QAAQ;AAAA,MACR,UAAU;AAAA,MACV,OAAO;AAAA,IACR,CAAC;AAGD,UAAM,WAAWA,cAAAA,IAAI,QAAQ;AAG7BC,kBAAAA,UAAU,MAAM;AAEf,YAAM,iBAAiBC,cAAAA,MAAI,eAAe,UAAU;AACpD,UAAI,gBAAgB;AACnB,iBAAS,QAAQ;AAAA,MACjB;AAGD,YAAM,iBAAiBA,cAAAA,MAAI,eAAe,UAAU;AACpD,UAAI,gBAAgB;AACnB,iBAAS,QAAQ;AAAA,MACjB;AAAA,IACF,CAAC;AAGD,UAAM,aAAa,CAAC,SAAS;AAC5B,UAAI,SAAS,UAAU;AAAM;AAE7B,eAAS,QAAQ;AAEjBA,oBAAAA,MAAI,eAAe,YAAY,IAAI;AAGnCA,oBAAAA,MAAI,UAAU;AAAA,QACb,OAAO,SAAS,aAAa,YAAY;AAAA,QACzC,MAAM;AAAA,MACR,CAAE;AAGD,YAAM,eAAe;AACrB,YAAM,cAAc,aAAa,aAAa,SAAS,CAAC;AACxD,UAAI,eAAe,YAAY,SAAS,CAAC,yBAAyB,oCAAoC,6BAA6B,EAAE,SAAS,YAAY,KAAK,GAAG;AACjK,mBAAW,MAAM;AAChBA,wBAAAA,MAAI,SAAS;AAAA,YACZ,KAAK,MAAM,YAAY;AAAA,UAC3B,CAAI;AAAA,QACD,GAAE,GAAG;AAAA,MACN;AAAA,IACF;AAGA,UAAM,aAAa,CAAC,QAAQ;AAE3B,UAAI,IAAI,SAAS,mCAAmC,KAChD,IAAI,SAAS,wBAAwB,GAAG;AAC3CA,sBAAAA,MAAI,UAAU;AAAA,UACb;AAAA,QACH,CAAG;AAAA,MACH,OAAQ;AACNA,sBAAAA,MAAI,WAAW;AAAA,UACd;AAAA,QACH,CAAG;AAAA,MACD;AAAA,IACF;AAGA,UAAM,SAAS,MAAM;AACpBA,oBAAAA,MAAI,UAAU;AAAA,QACb,OAAO;AAAA,QACP,SAAS;AAAA,QACT,SAAS,CAAC,QAAQ;AACjB,cAAI,IAAI,SAAS;AAEhBA,gCAAI,kBAAkB,UAAU;AAChCA,gCAAI,kBAAkB,UAAU;AAGhCA,0BAAAA,MAAI,SAAS;AAAA,cACZ,KAAK;AAAA,YACV,CAAK;AAAA,UACD;AAAA,QACD;AAAA,MACH,CAAE;AAAA,IACF;;;;;;;;;;;;;;;;;;;;;;;;;;AC5KA,GAAG,WAAWC,SAAe;"}