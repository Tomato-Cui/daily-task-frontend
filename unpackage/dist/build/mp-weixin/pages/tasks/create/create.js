"use strict";const e=require("../../../common/vendor.js"),t={__name:"create",setup(t){e.ref("employer");const a=["短期兼职","长期兼职","项目合作","其他"],o=e.ref({title:"",typeIndex:0,description:"",reward:"",peopleCount:"",deadline:"",contactPhone:"",location:""}),l=e.computed((()=>!(o.value.title&&o.value.description&&o.value.reward&&o.value.peopleCount&&o.value.deadline&&o.value.contactPhone))),i=e=>{o.value.typeIndex=e.detail.value},n=e=>{o.value.deadline=e.detail.value},u=()=>{if(l.value)return void e.index.showToast({title:"请填写完整信息",icon:"none"});const t={title:o.value.title,description:o.value.description,price:Number(this.form.price),peopleCount:Number(this.form.peopleCount),deadline:o.value.deadline,contactPhone:o.value.contactPhone,location:o.value.location};e.index.showLoading({title:"提交中..."}),e.index.request({url:"http://localhost:3000/tasks",method:"POST",header:{"Content-Type":"application/json"},data:t,success(t){e.index.hideLoading(),200===t.statusCode||201===t.statusCode?(e.index.showToast({title:"发布成功",icon:"success"}),setTimeout((()=>{e.index.switchTab({url:"/pages/tasks/list/list"})}),1500)):e.index.showToast({title:"发布失败",icon:"none"})},fail(t){e.index.hideLoading(),e.index.showToast({title:"网络错误，请重试",icon:"none"}),console.error("任务发布失败:",t)}})};return(t,d)=>({a:o.value.title,b:e.o((e=>o.value.title=e.detail.value)),c:e.t(a[o.value.typeIndex]),d:a,e:e.o(i),f:o.value.description,g:e.o((e=>o.value.description=e.detail.value)),h:o.value.reward,i:e.o((e=>o.value.reward=e.detail.value)),j:o.value.peopleCount,k:e.o((e=>o.value.peopleCount=e.detail.value)),l:e.t(o.value.deadline||"请选择截止日期"),m:o.value.deadline,n:e.o(n),o:o.value.contactPhone,p:e.o((e=>o.value.contactPhone=e.detail.value)),q:o.value.location,r:e.o((e=>o.value.location=e.detail.value)),s:l.value,t:l.value?1:"",v:e.o(u)})}};wx.createPage(t);
