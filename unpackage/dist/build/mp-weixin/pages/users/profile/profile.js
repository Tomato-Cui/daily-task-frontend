"use strict";const e=require("../../../common/vendor.js"),t={__name:"profile",setup(t){const a=e.ref({avatar:"",nickname:"张三",phone:"138****1234"}),s=e.ref("worker");e.onMounted((()=>{const t=e.index.getStorageSync("userInfo");t&&(a.value=t);const o=e.index.getStorageSync("userRole");o&&(s.value=o)}));const o=t=>{if(s.value===t)return;s.value=t,e.index.setStorageSync("userRole",t),e.index.showToast({title:"employer"===t?"已切换为雇佣者":"已切换为求职者",icon:"none"});const a=getCurrentPages(),o=a[a.length-1];o&&o.route&&["pages/tasks/list/list","pages/applications/status/status","pages/users/profile/profile"].includes(o.route)&&setTimeout((()=>{e.index.reLaunch({url:"/"+o.route})}),500)},r=t=>{t.includes("/pages/applications/status/status")||t.includes("/pages/tasks/list/list")?e.index.switchTab({url:t}):e.index.navigateTo({url:t})},n=()=>{e.index.showModal({title:"提示",content:"确定要退出登录吗？",success:t=>{t.confirm&&(e.index.removeStorageSync("userInfo"),e.index.removeStorageSync("userRole"),e.index.reLaunch({url:"/pages/auth/login/login"}))}})};return(t,i)=>e.e({a:a.value.avatar||"/static/default-avatar.png",b:e.t(a.value.nickname||"未登录"),c:e.t(a.value.phone||"未绑定手机号"),d:e.n("employer"===s.value?"role-active":"role-inactive"),e:e.o((e=>o("employer"))),f:e.n("worker"===s.value?"role-active":"role-inactive"),g:e.o((e=>o("worker"))),h:e.o((e=>r("/pages/users/editProfile/editProfile"))),i:e.o((e=>r("/pages/tasks/list/list"))),j:"employer"===s.value},"employer"===s.value?{k:e.o((e=>r("/pages/tasks/create/create")))}:{},{l:"worker"===s.value},"worker"===s.value?{m:e.o((e=>r("/pages/applications/status/status")))}:{},{n:e.o((e=>r("/pages/payments/history/history"))),o:e.o(n)})}};wx.createPage(t);
