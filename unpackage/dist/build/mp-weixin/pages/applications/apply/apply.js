"use strict";const t=require("../../../common/vendor.js"),e={data:()=>({taskId:0,task:{id:0,title:"",status:"open",reward:0,deadline:new Date,publisher:{id:0,name:""}},form:{phone:"",introduction:"",expectedReward:"",additionalInfo:""}}),onLoad(e){console.log("apply页面接收到的参数:",e),e.id?(this.taskId=Number(e.id),this.fetchTaskInfo()):t.index.showToast({title:"参数错误",icon:"none"});const o=t.index.getStorageSync("userInfo");o&&o.phone&&(this.form.phone=o.phone)},methods:{fetchTaskInfo(){this.taskId?(t.index.showLoading({title:"加载中..."}),setTimeout((()=>{t.index.hideLoading(),this.task={id:this.taskId,title:"设计一个企业Logo",status:"open",reward:500,deadline:new Date("2023-12-30"),publisher:{id:1,name:"张企业",avatar:"http://iph.href.lu/50x50"}},this.form.expectedReward=this.task.reward,console.log("已加载任务信息：",this.task)}),500)):t.index.showToast({title:"任务ID不存在",icon:"none"})},goBack(){t.index.navigateBack()},submitApplication(){this.form.phone?!this.form.introduction||this.form.introduction.length<100?t.index.showToast({title:"个人介绍不能少于100字",icon:"none"}):this.form.expectedReward?(t.index.showLoading({title:"提交中..."}),setTimeout((()=>{t.index.hideLoading(),t.index.showModal({title:"申请成功",content:"您的申请已提交，请等待雇主审核。",showCancel:!1,success:()=>{t.index.switchTab({url:"/pages/applications/status/status"})}})}),1e3)):t.index.showToast({title:"请输入期望报酬",icon:"none"}):t.index.showToast({title:"请输入联系电话",icon:"none"})},getStatusClass(t){switch(t){case"open":return"status-open";case"in_progress":return"status-progress";case"completed":default:return"status-completed";case"closed":return"status-closed"}},getStatusText(t){switch(t){case"open":return"招募中";case"in_progress":return"进行中";case"completed":return"已完成";case"closed":return"已关闭";default:return"未知"}},formatDate(t){const e=new Date(t);return`${e.getFullYear()}-${(e.getMonth()+1).toString().padStart(2,"0")}-${e.getDate().toString().padStart(2,"0")}`}}};const o=t._export_sfc(e,[["render",function(e,o,a,s,n,i){return{a:t.o(((...t)=>i.goBack&&i.goBack(...t))),b:t.t(n.task.title),c:t.t(i.getStatusText(n.task.status)),d:t.n(i.getStatusClass(n.task.status)),e:t.t(n.task.reward),f:t.t(i.formatDate(n.task.deadline)),g:t.t(n.task.publisher.name),h:n.form.phone,i:t.o((t=>n.form.phone=t.detail.value)),j:n.form.introduction,k:t.o((t=>n.form.introduction=t.detail.value)),l:t.t(n.form.introduction.length),m:n.form.expectedReward,n:t.o((t=>n.form.expectedReward=t.detail.value)),o:n.form.additionalInfo,p:t.o((t=>n.form.additionalInfo=t.detail.value)),q:t.o(((...t)=>i.submitApplication&&i.submitApplication(...t)))}}]]);wx.createPage(o);
